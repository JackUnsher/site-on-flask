# Cursor MCP - Сервер

Серверный компонент системы интеграции Figma и Cursor IDE, который автоматически получает данные из Figma и применяет их к проекту.

## Принцип работы

Сервер Cursor MCP работает как посредник между плагином Figma и вашим проектом в Cursor IDE, автоматически:

1. Получает структуру дизайна из Figma
2. Экспортирует изображения и дизайн-токены
3. Генерирует готовую HTML-разметку и CSS-стили по принципу "от фона к наполнению и от шапки к футеру"
4. Интегрирует компоненты и изображения в ваш проект

## Установка

```bash
# Перейдите в директорию mcp/cursor
cd mcp/cursor

# Установите зависимости
npm install

# Сделайте скрипт запуска исполняемым (для Linux/Mac)
chmod +x start.js
```

## Запуск

```bash
# Базовый запуск
node start.js

# Запуск с указанием порта
node start.js --port 9000

# Запуск с автоматическим наблюдением за изменениями файлов
node start.js --watch

# Запуск с автоматическим импортом при получении данных из Figma
node start.js --auto-import

# Полный набор параметров
node start.js --port 9912 --watch --auto-import --debug --output ./my-project
```

## Структура проекта

```
mcp/cursor/
│
├── server.js           # Основной WebSocket сервер
├── start.js            # Скрипт запуска с CLI интерфейсом
├── css-generator.js    # Модуль генерации CSS из данных Figma
├── html-generator.js   # Модуль генерации HTML из данных Figma
├── package.json        # Зависимости проекта
└── README.md           # Документация
```

## Принцип "от фона к наполнению и от шапки к футеру"

Cursor MCP использует особый алгоритм анализа макетов Figma для построения правильной семантической разметки:

1. **Фон (background)** - обнаруживается как самый нижний слой, занимающий большую часть холста
2. **Шапка (header)** - верхние элементы макета с навигацией, логотипом и т.д.
3. **Основное содержимое (content)** - анализируется на наличие секций и колонок
4. **Футер (footer)** - нижние элементы макета с соответствующей структурой

Такой подход позволяет генерировать семантически корректную HTML-структуру, которая соответствует лучшим практикам и легко стилизуется.

## Автоматическое создание компонентов

Сервер автоматически анализирует структуру дизайна и создает соответствующие компоненты:

1. **Общая разметка** - создается в `templates/generated.html`
2. **CSS-стили** - создаются в `static/css/generated.css`
3. **Изображения** - экспортируются в директорию `assets/`
4. **React/Vue компоненты** - создаются в директории `components/` (при наличии соответствующих настроек)

## Взаимодействие с плагином Figma

Плагин Figma подключается к серверу по WebSocket соединению и отправляет:

1. Структуру выбранных слоев или всей страницы
2. Экспортированные изображения
3. Токены дизайна (цвета, шрифты, размеры и т.д.)

Сервер обрабатывает эти данные и интегрирует их в проект автоматически.

## Расширенная настройка

Для более гибкой настройки создайте файл конфигурации `cursor-mcp.config.js`:

```javascript
module.exports = {
  port: 9912,
  watchMode: true,
  autoImport: true,
  debug: false,
  outputDirectory: './app',
  projectType: 'flask', // flask, react, vue, static
  cssFramework: 'native', // native, bootstrap, tailwind
  assetsDirectory: './app/static/images',
  templatesDirectory: './app/templates',
  stylesDirectory: './app/static/css',
  componentsDirectory: './app/components'
};
```

Запустите сервер с вашей конфигурацией:

```bash
node start.js --config ./cursor-mcp.config.js
```

## Лицензия

MIT 